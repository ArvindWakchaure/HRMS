{"version":3,"sources":["./src/app/checkin/checkin-routing.module.ts","./src/app/checkin/checkin.module.ts","./src/app/checkin/checkin.page.ts","./src/app/checkin/checkin.page.scss","./src/app/checkin/checkin.page.html"],"names":[],"mappings":"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","file":"src_app_checkin_checkin_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CheckinPage } from './checkin.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CheckinPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CheckinPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CheckinPageRoutingModule } from './checkin-routing.module';\n\nimport { CheckinPage } from './checkin.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CheckinPageRoutingModule\n  ],\n  declarations: [CheckinPage]\n})\nexport class CheckinPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { DatabaseService } from '../Services/database.service';\nimport { ToastController } from '@ionic/angular';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\n\n@Component({\n  selector: 'app-checkin',\n  templateUrl: './checkin.page.html',\n  styleUrls: ['./checkin.page.scss'],\n})\nexport class CheckinPage implements OnInit {\n  para: any;\n  latitude: any;\n  longitude: any;\n  record: any;\n  lat: any;\n  response:any;\n  long: any;\n  radiusAllowed: any;\n  IP: string;\n  AppDetail: any;\n  LoginRes: any;\n\n  constructor(private db: DatabaseService,\n    private geolocation: Geolocation,\n    private toastController: ToastController) { }\n\n  ngOnInit() {\n    this.para = JSON.parse(localStorage.getItem('para'));\n    console.log(\"Device IP: \",localStorage.getItem('IP'));\n    setTimeout(() => {\n      this.getLocation();\n    },1000);\n    this.checkIn();\n  }\n\n  getLocation() {\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.latitude = resp.coords.latitude;\n      this.longitude = resp.coords.longitude;\n      console.log(\"lat: \"+ this.latitude+ \"===\"+ \"lang: \"+this.longitude);\n    }).catch((error) => {\n      console.log('Error getting location', error);\n    });\n  }\n  // GetLocation\n  GetLocationApi(){\n    let parameter = JSON.parse(localStorage.getItem('para'));\n    console.log(parameter);\n    this.db.GetLocation(parameter).subscribe(async res => {\n      console.log(\"Getlocation Response: \",res);\n      if(res.code == 200) {\n        this.record= res.record;\n        this.lat=res.lat;\n        this.long=res.long;\n        this.radiusAllowed=res.radiusAllowed;\n        console.log(this.record);\n        console.log(this.lat);\n        console.log(this.long);\n        console.log(this.radiusAllowed);\n        if(this.radiusAllowed<=50){\n          this.makeAttendanceCheckIN();\n        }\n        else{\n          const toast = await this.toastController.create({\n            message: 'Sorry your mobile is not within allowed range',\n            duration: 2000\n          });\n          toast.present();\n        }\n      }\n    },\n    async error => {\n      console.log(error);\n      const toast = await this.toastController.create({\n        message: 'Invalid employee code..',\n        duration: 2000\n      });\n      toast.present();\n    })\n  }\n  checkIn() {\n    this.db.checkIn(this.para).subscribe(async res => {\n      console.log(\"Check In Response: \",res);\n      if(res.isSuccess == true) {\n        const toast = await this.toastController.create({\n          message: ' You are authorized to make attendance with mobile',\n          duration: 3000\n        });\n        toast.present();\n        this.CreateAttendance();\n        // this.GetLocationApi();\n      }\n      else if(res == \"You are not allowed to make attendance with mobile\"){\n        const toast = await this.toastController.create({\n          message: 'You are not allowed to make attendance with mobile',\n          duration: 3000\n        });\n        toast.present();\n      }\n    },\n    async error => {\n      console.log(error);\n      const toast = await this.toastController.create({\n        message: 'Invalid employee code..',\n        duration: 2000\n      });\n      toast.present();\n    })\n  }\n  makeAttendanceCheckIN() {\n    this.db.ValidateCheckin(this.para).subscribe(async res => {\n      console.log(\"Check In Response: \",res);\n      if(res.isSuccess == true) {\n        const toast = await this.toastController.create({\n          message: ' You are authorized to make attendance with mobile',\n          duration: 3000\n        });\n        toast.present();\n      }\n      else if(res == \"You are not allowed to make attendance with mobile\"){\n        const toast = await this.toastController.create({\n          message: 'You are not allowed to make attendance with mobile',\n          duration: 3000\n        });\n        toast.present();\n      }\n    },\n    async error => {\n      console.log(error);\n      const toast = await this.toastController.create({\n        message: 'Invalid employee code..',\n        duration: 2000\n      });\n      toast.present();\n    })\n  }\n  makeAttendanceCheckOut() {\n    this.db.ValidateCheckin(this.para).subscribe(async res => {\n      console.log(\"Check In Response: \",res);\n      if(res.isSuccess == true) {\n        const toast = await this.toastController.create({\n          message: ' You are authorized to make attendance with mobile',\n          duration: 3000\n        });\n        toast.present();\n      }\n      else if(res == \"You are not allowed to make attendance with mobile\"){\n        const toast = await this.toastController.create({\n          message: 'You are not allowed to make attendance with mobile',\n          duration: 3000\n        });\n        toast.present();\n      }\n    },\n    async error => {\n      console.log(error);\n      const toast = await this.toastController.create({\n        message: 'Invalid employee code..',\n        duration: 2000\n      });\n      toast.present();\n    })\n  }\n  CreateAttendance(){\n    this.IP=localStorage.getItem('IP');\n    this.AppDetail=localStorage.getItem('AppDetail',);\n    let para = JSON.parse(localStorage.getItem('para'));\n    \n    let parameter={\n        \"EmpCode\"  : para.EmpID,\n        \"DomainName\":para.DomainName,\n        \"AttenType\":\"P\",\n        \"AttenValue\":\"1\",\n        \"Lat\":this.latitude, \n        \"Long\":this.longitude,  \n        \"IP\":this.IP,    \n        \"DeviceID\": this.AppDetail.uuid+\",\"+this.AppDetail.model,\n        \"Remarks\":\"N/A\"\n  }\n    console.log(parameter);\n    alert(JSON.stringify(parameter));\n\n    // this.db.createAttendance(parameter).subscribe(async (data) => {     \n    //   console.log(data); \n    //   this.response=data; \n    //   if(data.responseCode == 200) {\n    //     // const toast = await this.toastController.create({\n    //     //   message: 'Login Successfully',\n    //     //   duration: 2000\n    //     // });\n    //     // toast.present();\n    //     // this.checkIn();\n    //   }\n    //   if(data.responseCode == 2007) {\n    //     const toast = await this.toastController.create({\n    //       message: `${this.response[0].message}`,\n    //       duration: 3000\n    //     });\n    //     toast.present();\n    //   }\n    //   else {\n    //     const toast = await this.toastController.create({\n    //       message: 'Your settings have been saved.',\n    //       duration: 2000\n    //     });\n    //     toast.present();\n    //   }\n\n    // },async (err)=>{\n    //   const toast = await this.toastController.create({\n    //     message: 'Invalid employee code or password.',\n    //     duration: 2000\n    //   });\n    //   toast.present();\n    // });\n  }\n}\n","export default \"* {\\n  font-family: \\\"Poppins-Regular\\\";\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNraW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksOEJBQUE7QUFDSiIsImZpbGUiOiJjaGVja2luLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIioge1xuICAgIGZvbnQtZmFtaWx5OiAnUG9wcGlucy1SZWd1bGFyJztcbiAgXG4gIH0iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar class=\\\"headblue\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n          <ion-back-button defaultHref=\\\"tabs\\\"></ion-back-button>\\n        </ion-buttons>\\n    <ion-title>CheckIn</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}